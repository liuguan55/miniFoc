
SET(FPU_FLAGS "-mfloat-abi=soft")

SET(COMMON_FLAGS
    "-mcpu=cortex-m0 ${FPU_FLAGS} -mthumb  -specs=nano.specs -mthumb-interwork -ffunction-sections -fdata-sections \
    -g -fno-common -fmessage-length=0  ")

add_definitions(-DDEBUG -DUSE_HAL_DRIVER)


string(TOUPPER STM32F1 TARGET_MCU_UPPER)
add_definitions(-DTARGET_MCU_${TARGET_MCU_UPPER})

file(GLOB_RECURSE PLATFORM_SOURCES "src/driver/chip/platform/STM32G0xx_HAL_Driver/*.*"
                "project/common/startup/STM32G0/*.*")
if (USE_RTOS_SYSTEM)
    list(APPEND PLATFORM_SOURCES  "src/kernel/FreeRTOS/Source/portable/GCC/ARM_CM0/port.c")
endif()
list(APPEND SOURCES ${PLATFORM_SOURCES})

list(APPEND HEADERS  include/driver/chip/platform/STM32G0
                  include/driver/chip/platform/STM32G0/STM32G0xx_HAL_Driver
                  include/driver/chip/platform/STM32G0/STM32G0xx_HAL_Driver/Legacy
                  include/driver/chip/CMSIS/device/ST/STM32G0xx
                  include/kernel/FreeRTOS/GCC/ARM_CM0)
